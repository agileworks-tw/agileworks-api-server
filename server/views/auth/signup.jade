extends ../layout


block body
  #home.container(style='max-width:800px;margin-top:100px;')
    .row
      .col-sm-4
        img.img-thumbnail(src='/public/assets/images/book-cover.jpg', alt='book', width='280')
      .col-sm-8
        .promotion
          h3 Jenkins Workshop
          
          form(method='post', action='/auth/register')
            .form-group
              label(for='coupon') 
              input#coupon.form-control(type='text', placeholder='coupon', name='[coupon][serial]')
            .form-group
              label(for='email') 
              input#email.form-control(type='email', placeholder='email', name='[user][email]')
            .form-group
              label(for='password') 
              input#password.form-control(type='password', placeholder='password', name='[user][password]')


            button#register.btn.btn-primary(type='submit', disabled) register
      .col-xs-12
        .copyright
          | 創科資訊・敏捷軟體開發培訓
          br
          | Tel: (04)2201-9020
          br
          br
          | AgileWorks - Agile Programming Best Practices
          br
          | Copyright © Trunk Studio
  
  script(type='text/javascript').
    $(function(){
      $("#coupon").change(function(){
        var serial = $("#coupon").val();
        $.ajax({
          url: '/rest/coupon/check/',
          type: 'POST',
          data: {
            serial: serial
          },
          success: function(response) {
            console.log(response);
            
            if(response.success)
              $('#register').prop('disabled', false);
            else {
              alert(response.message)
              $('#register').prop('disabled', true);
            }
          }
        });
      });

    });
    
